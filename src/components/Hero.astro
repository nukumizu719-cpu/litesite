---
// src/components/Hero.astro
import HeroContent from './HeroContent.astro';
---

<section class="relative bg-white min-h-[5vh] md:min-h-[10vh] flex items-center overflow-hidden">
  
  <div class="absolute inset-0 z-0 bg-black"> <video
      id="hero-video"
      class="w-full h-full object-cover object-center"
      autoplay
      muted
      loop
      playsinline
      /* poster属性を削除しました */
    >
      <source src="/images/hero-sp.mp4" type="video/mp4" media="(max-width: 767px)" />
      <source src="/images/hero-pc.mp4" type="video/mp4" />
      </video>
  </div>

  <div class="absolute inset-0 bg-slate-950/30 z-10 pointer-events-none"></div>

  <button
    id="video-toggle-btn"
    type="button"
    class="absolute top-4 right-4 z-30 px-3 py-2 md:px-4 md:py-2.5 rounded-full border border-white/45 bg-black/35 text-white text-xs md:text-sm font-semibold backdrop-blur-sm hover:bg-black/45 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent cursor-pointer"
    aria-controls="hero-video"
    aria-pressed="true" 
  >
    動画を停止する
  </button>

  <HeroContent />

</section>

<script>
  // 前述のスクリプトと同様のため省略（そのまま利用可能です）
  document.addEventListener('DOMContentLoaded', () => {
    const video = document.getElementById('hero-video') as HTMLVideoElement;
    const btn = document.getElementById('video-toggle-btn');
    if (!video || !btn) return;

    const setBtnState = (isPlaying: boolean) => {
      btn.textContent = isPlaying ? '動画を停止する' : '動画を再生する';
      btn.setAttribute('aria-pressed', String(isPlaying));
    };

    if (video.paused) setBtnState(false);
    video.addEventListener('play', () => setBtnState(true));
    video.addEventListener('pause', () => setBtnState(false));

    btn.addEventListener('click', () => {
      if (video.paused) {
        video.play().catch(e => console.warn('Play failed:', e));
      } else {
        video.pause();
      }
    });
  });
</script>